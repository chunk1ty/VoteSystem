@model VoteSystem.Web.ViewModels.QuestionAnswerViewModel

@{
    var currentQuestionClass = Guid.NewGuid();
}

@using (Html.BeginCollectionItem((string)ViewBag.ContainerPrefix + ".QuestionAnswers"))
{
    <div class="form-group">
        @Html.LabelFor(m => m.QuestionAnswerName, new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
        <div class="col-md-6 col-sm-6 col-xs-12">
            @Html.TextBoxFor(m => m.QuestionAnswerName, new { @class = @currentQuestionClass + " form-control col-md-7 col-xs-12", placeholder = "Enter question answer" })
        </div>
        <div class="btn btn-danger remove-btn">Remove</div>
    </div>
}

@*TODO remove this shit from here (Edit question/answers mapping issue)*@
@if ((string)ViewBag.ContainerPrefix == null)
{
    <script>
        var currentQuestionNameAttr = $('.@currentQuestionClass')
                                        .closest('.row')
                                        .find('.current-question')
                                        .attr('name')
                                        .substring(0, 47);

        var currentQuestionAnswerNameAttr = $('.@currentQuestionClass').attr('name');

        $('.@currentQuestionClass')
            .closest('.form-group')
            .prev()
            .attr('name', currentQuestionNameAttr + '.QuestionAnswers.index');

        $('.@currentQuestionClass')
            .attr('name', currentQuestionNameAttr + '.' + currentQuestionAnswerNameAttr);
    </script>
}